# 10.멀티 프로세서 스케줄링 (고급)

다수의 CPU를 사용하는 멀티코어 기술을 어떻게 효율적으로 사용하는 방법 -> **쓰레드**를 이용하여 프로그램이 병렬로 실행하도록 작성
> 그렇다면 멀티코어 프로그램은 어떻게 스케줄링 되어야 하는가?

## 10.1 배경: 멀티프로세서 구조

- 하드웨어 캐시 계층: 프로그램을 빠르게 실행하기 위해 존재 - 메인 메모리에서 자주 사용되는 데이터의 복사본을 저장
  - 시간 지역성: 데이터에 한 번 접근하면 가까운 미래에 재접근하기 쉬움
  - 공간 지역성: 프로그램이 주소 x의 데이터를 접근하면 주소 x 주변의 데이터에 재접근하기 쉬움
 
-> 단일 CPU 시스템에서는 캐시 사용이 편리했지만, 멀티프로세서 시스템에서는 생각해야 할 부분이 더 많다.
- 캐시 일관성 문제: 변경한 데이터를 바로 메인 메모리에 저장하지 않으므로, 각 CPU들끼리 캐시에 갖고 있는 데이터가 다를 수 있다.
- 기본 해결책은 하드웨어가 메모리 주소를 감시하고 시스템을 관리하는 것으로, 특히 여러 개의 프로세스들이 하나의 메모리에 갱신할 때는 항상 공유되도록 함  
  - 버스 스누핑 (버스 기반 시스템에서 사용)
    1. 캐시는 자신과 메모리를 연결하는 버스의 통신 상황을 계속 모니터링
    2. 캐시 데이터에 대한 변경이 발생하면 자신의 복사본을 무효화 시키거나 갱신함
    - write-back 캐시에 대한 처리는 더 복잡하다.

## 10.2 동기화를 잊지 마시오
